/**
 * Copyright 2016-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 */

'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var ReactInvalidSetStateWarningHook = require('./ReactInvalidSetStateWarningHook');
var ReactHostOperationHistoryHook = require('./ReactHostOperationHistoryHook');
var ReactComponentTreeHook = require('react/lib/ReactComponentTreeHook');
var ExecutionEnvironment = require('fbjs/lib/ExecutionEnvironment');

var performanceNow = require('fbjs/lib/performanceNow');
var warning = require('fbjs/lib/warning');

var hooks = [];
var didHookThrowForEvent = {};

function callHook(event, fn, context, arg1, arg2, arg3, arg4, arg5) {
  try {
    fn.call(context, arg1, arg2, arg3, arg4, arg5);
  } catch (e) {
    process.env.NODE_ENV !== 'production' ? warning(didHookThrowForEvent[event], 'Exception thrown by hook while handling %s: %s', event, e + '\n' + e.stack) : void 0;
    didHookThrowForEvent[event] = true;
  }
}

function emitEvent(event, arg1, arg2, arg3, arg4, arg5) {
  for (var i = 0; i < hooks.length; i++) {
    var hook = hooks[i];
    var fn = hook[event];
    if (fn) {
      callHook(event, fn, hook, arg1, arg2, arg3, arg4, arg5);
    }
  }
}

var _isProfiling = false;
var flushHistory = [];
var lifeCycleTimerStack = [];
var currentFlushNesting = 0;
var currentFlushMeasurements = [];
var currentFlushStartTime = 0;
var currentTimerDebugID = null;
var currentTimerStartTime = 0;
var currentTimerNestedFlushDuration = 0;
var currentTimerType = null;

var lifeCycleTimerHasWarned = false;

function clearHistory() {
  ReactComponentTreeHook.purgeUnmountedComponents();
  ReactHostOperationHistoryHook.clearHistory();
}

function getTreeSnapshot(registeredIDs) {
  return registeredIDs.reduce(function (tree, id) {
    var ownerID = ReactComponentTreeHook.getOwnerID(id);
    var parentID = ReactComponentTreeHook.getParentID(id);
    tree[id] = {
      displayName: ReactComponentTreeHook.getDisplayName(id),
      text: ReactComponentTreeHook.getText(id),
      updateCount: ReactComponentTreeHook.getUpdateCount(id),
      childIDs: ReactComponentTreeHook.getChildIDs(id),
      // Text nodes don't have owners but this is close enough.
      ownerID: ownerID || parentID && ReactComponentTreeHook.getOwnerID(parentID) || 0,
      parentID: parentID
    };
    return tree;
  }, {});
}

function resetMeasurements() {
  var previousStartTime = currentFlushStartTime;
  var previousMeasurements = currentFlushMeasurements;
  var previousOperations = ReactHostOperationHistoryHook.getHistory();

  if (currentFlushNesting === 0) {
    currentFlushStartTime = 0;
    currentFlushMeasurements = [];
    clearHistory();
    return;
  }

  if (previousMeasurements.length || previousOperations.length) {
    var registeredIDs = ReactComponentTreeHook.getRegisteredIDs();
    flushHistory.push({
      duration: performanceNow() - previousStartTime,
      measurements: previousMeasurements || [],
      operations: previousOperations || [],
      treeSnapshot: getTreeSnapshot(registeredIDs)
    });
  }

  clearHistory();
  currentFlushStartTime = performanceNow();
  currentFlushMeasurements = [];
}

function checkDebugID(debugID) {
  var allowRoot = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

  if (allowRoot && debugID === 0) {
    return;
  }
  if (!debugID) {
    process.env.NODE_ENV !== 'production' ? warning(false, 'ReactDebugTool: debugID may not be empty.') : void 0;
  }
}

function beginLifeCycleTimer(debugID, timerType) {
  if (currentFlushNesting === 0) {
    return;
  }
  if (currentTimerType && !lifeCycleTimerHasWarned) {
    process.env.NODE_ENV !== 'production' ? warning(false, 'There is an internal error in the React performance measurement code. ' + 'Did not expect %s timer to start while %s timer is still in ' + 'progress for %s instance.', timerType, currentTimerType || 'no', debugID === currentTimerDebugID ? 'the same' : 'another') : void 0;
    lifeCycleTimerHasWarned = true;
  }
  currentTimerStartTime = performanceNow();
  currentTimerNestedFlushDuration = 0;
  currentTimerDebugID = debugID;
  currentTimerType = timerType;
}

function endLifeCycleTimer(debugID, timerType) {
  if (currentFlushNesting === 0) {
    return;
  }
  if (currentTimerType !== timerType && !lifeCycleTimerHasWarned) {
    process.env.NODE_ENV !== 'production' ? warning(false, 'There is an internal error in the React performance measurement code. ' + 'We did not expect %s timer to stop while %s timer is still in ' + 'progress for %s instance. Please report this as a bug in React.', timerType, currentTimerType || 'no', debugID === currentTimerDebugID ? 'the same' : 'another') : void 0;
    lifeCycleTimerHasWarned = true;
  }
  if (_isProfiling) {
    currentFlushMeasurements.push({
      timerType: timerType,
      instanceID: debugID,
      duration: performanceNow() - currentTimerStartTime - currentTimerNestedFlushDuration
    });
  }
  currentTimerStartTime = 0;
  currentTimerNestedFlushDuration = 0;
  currentTimerDebugID = null;
  currentTimerType = null;
}

function pauseCurrentLifeCycleTimer() {
  var currentTimer = {
    startTime: currentTimerStartTime,
    nestedFlushStartTime: performanceNow(),
    debugID: currentTimerDebugID,
    timerType: currentTimerType
  };
  lifeCycleTimerStack.push(currentTimer);
  currentTimerStartTime = 0;
  currentTimerNestedFlushDuration = 0;
  currentTimerDebugID = null;
  currentTimerType = null;
}

function resumeCurrentLifeCycleTimer() {
  var _lifeCycleTimerStack$ = lifeCycleTimerStack.pop(),
      startTime = _lifeCycleTimerStack$.startTime,
      nestedFlushStartTime = _lifeCycleTimerStack$.nestedFlushStartTime,
      debugID = _lifeCycleTimerStack$.debugID,
      timerType = _lifeCycleTimerStack$.timerType;

  var nestedFlushDuration = performanceNow() - nestedFlushStartTime;
  currentTimerStartTime = startTime;
  currentTimerNestedFlushDuration += nestedFlushDuration;
  currentTimerDebugID = debugID;
  currentTimerType = timerType;
}

var lastMarkTimeStamp = 0;
var canUsePerformanceMeasure =
// $FlowFixMe https://github.com/facebook/flow/issues/2345
typeof performance !== 'undefined' && typeof performance.mark === 'function' && typeof performance.clearMarks === 'function' && typeof performance.measure === 'function' && typeof performance.clearMeasures === 'function';

function shouldMark(debugID) {
  if (!_isProfiling || !canUsePerformanceMeasure) {
    return false;
  }
  var element = ReactComponentTreeHook.getElement(debugID);
  if (element == null || (typeof element === 'undefined' ? 'undefined' : _typeof(element)) !== 'object') {
    return false;
  }
  var isHostElement = typeof element.type === 'string';
  if (isHostElement) {
    return false;
  }
  return true;
}

function markBegin(debugID, markType) {
  if (!shouldMark(debugID)) {
    return;
  }

  var markName = debugID + '::' + markType;
  lastMarkTimeStamp = performanceNow();
  performance.mark(markName);
}

function markEnd(debugID, markType) {
  if (!shouldMark(debugID)) {
    return;
  }

  var markName = debugID + '::' + markType;
  var displayName = ReactComponentTreeHook.getDisplayName(debugID) || 'Unknown';

  // Chrome has an issue of dropping markers recorded too fast:
  // https://bugs.chromium.org/p/chromium/issues/detail?id=640652
  // To work around this, we will not report very small measurements.
  // I determined the magic number by tweaking it back and forth.
  // 0.05ms was enough to prevent the issue, but I set it to 0.1ms to be safe.
  // When the bug is fixed, we can `measure()` unconditionally if we want to.
  var timeStamp = performanceNow();
  if (timeStamp - lastMarkTimeStamp > 0.1) {
    var measurementName = displayName + ' [' + markType + ']';
    performance.measure(measurementName, markName);
  }

  performance.clearMarks(markName);
  performance.clearMeasures(measurementName);
}

var ReactDebugTool = {
  addHook: function addHook(hook) {
    hooks.push(hook);
  },
  removeHook: function removeHook(hook) {
    for (var i = 0; i < hooks.length; i++) {
      if (hooks[i] === hook) {
        hooks.splice(i, 1);
        i--;
      }
    }
  },
  isProfiling: function isProfiling() {
    return _isProfiling;
  },
  beginProfiling: function beginProfiling() {
    if (_isProfiling) {
      return;
    }

    _isProfiling = true;
    flushHistory.length = 0;
    resetMeasurements();
    ReactDebugTool.addHook(ReactHostOperationHistoryHook);
  },
  endProfiling: function endProfiling() {
    if (!_isProfiling) {
      return;
    }

    _isProfiling = false;
    resetMeasurements();
    ReactDebugTool.removeHook(ReactHostOperationHistoryHook);
  },
  getFlushHistory: function getFlushHistory() {
    return flushHistory;
  },
  onBeginFlush: function onBeginFlush() {
    currentFlushNesting++;
    resetMeasurements();
    pauseCurrentLifeCycleTimer();
    emitEvent('onBeginFlush');
  },
  onEndFlush: function onEndFlush() {
    resetMeasurements();
    currentFlushNesting--;
    resumeCurrentLifeCycleTimer();
    emitEvent('onEndFlush');
  },
  onBeginLifeCycleTimer: function onBeginLifeCycleTimer(debugID, timerType) {
    checkDebugID(debugID);
    emitEvent('onBeginLifeCycleTimer', debugID, timerType);
    markBegin(debugID, timerType);
    beginLifeCycleTimer(debugID, timerType);
  },
  onEndLifeCycleTimer: function onEndLifeCycleTimer(debugID, timerType) {
    checkDebugID(debugID);
    endLifeCycleTimer(debugID, timerType);
    markEnd(debugID, timerType);
    emitEvent('onEndLifeCycleTimer', debugID, timerType);
  },
  onBeginProcessingChildContext: function onBeginProcessingChildContext() {
    emitEvent('onBeginProcessingChildContext');
  },
  onEndProcessingChildContext: function onEndProcessingChildContext() {
    emitEvent('onEndProcessingChildContext');
  },
  onHostOperation: function onHostOperation(operation) {
    checkDebugID(operation.instanceID);
    emitEvent('onHostOperation', operation);
  },
  onSetState: function onSetState() {
    emitEvent('onSetState');
  },
  onSetChildren: function onSetChildren(debugID, childDebugIDs) {
    checkDebugID(debugID);
    childDebugIDs.forEach(checkDebugID);
    emitEvent('onSetChildren', debugID, childDebugIDs);
  },
  onBeforeMountComponent: function onBeforeMountComponent(debugID, element, parentDebugID) {
    checkDebugID(debugID);
    checkDebugID(parentDebugID, true);
    emitEvent('onBeforeMountComponent', debugID, element, parentDebugID);
    markBegin(debugID, 'mount');
  },
  onMountComponent: function onMountComponent(debugID) {
    checkDebugID(debugID);
    markEnd(debugID, 'mount');
    emitEvent('onMountComponent', debugID);
  },
  onBeforeUpdateComponent: function onBeforeUpdateComponent(debugID, element) {
    checkDebugID(debugID);
    emitEvent('onBeforeUpdateComponent', debugID, element);
    markBegin(debugID, 'update');
  },
  onUpdateComponent: function onUpdateComponent(debugID) {
    checkDebugID(debugID);
    markEnd(debugID, 'update');
    emitEvent('onUpdateComponent', debugID);
  },
  onBeforeUnmountComponent: function onBeforeUnmountComponent(debugID) {
    checkDebugID(debugID);
    emitEvent('onBeforeUnmountComponent', debugID);
    markBegin(debugID, 'unmount');
  },
  onUnmountComponent: function onUnmountComponent(debugID) {
    checkDebugID(debugID);
    markEnd(debugID, 'unmount');
    emitEvent('onUnmountComponent', debugID);
  },
  onTestEvent: function onTestEvent() {
    emitEvent('onTestEvent');
  }
};

// TODO remove these when RN/www gets updated
ReactDebugTool.addDevtool = ReactDebugTool.addHook;
ReactDebugTool.removeDevtool = ReactDebugTool.removeHook;

ReactDebugTool.addHook(ReactInvalidSetStateWarningHook);
ReactDebugTool.addHook(ReactComponentTreeHook);
var url = ExecutionEnvironment.canUseDOM && window.location.href || '';
if (/[?&]react_perf\b/.test(url)) {
  ReactDebugTool.beginProfiling();
}

module.exports = ReactDebugTool;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3B1YmxpYy9saWIvcmVhY3QtZG9tL2xpYi9SZWFjdERlYnVnVG9vbC5qcyJdLCJuYW1lcyI6WyJSZWFjdEludmFsaWRTZXRTdGF0ZVdhcm5pbmdIb29rIiwicmVxdWlyZSIsIlJlYWN0SG9zdE9wZXJhdGlvbkhpc3RvcnlIb29rIiwiUmVhY3RDb21wb25lbnRUcmVlSG9vayIsIkV4ZWN1dGlvbkVudmlyb25tZW50IiwicGVyZm9ybWFuY2VOb3ciLCJ3YXJuaW5nIiwiaG9va3MiLCJkaWRIb29rVGhyb3dGb3JFdmVudCIsImNhbGxIb29rIiwiZXZlbnQiLCJmbiIsImNvbnRleHQiLCJhcmcxIiwiYXJnMiIsImFyZzMiLCJhcmc0IiwiYXJnNSIsImNhbGwiLCJlIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwic3RhY2siLCJlbWl0RXZlbnQiLCJpIiwibGVuZ3RoIiwiaG9vayIsImlzUHJvZmlsaW5nIiwiZmx1c2hIaXN0b3J5IiwibGlmZUN5Y2xlVGltZXJTdGFjayIsImN1cnJlbnRGbHVzaE5lc3RpbmciLCJjdXJyZW50Rmx1c2hNZWFzdXJlbWVudHMiLCJjdXJyZW50Rmx1c2hTdGFydFRpbWUiLCJjdXJyZW50VGltZXJEZWJ1Z0lEIiwiY3VycmVudFRpbWVyU3RhcnRUaW1lIiwiY3VycmVudFRpbWVyTmVzdGVkRmx1c2hEdXJhdGlvbiIsImN1cnJlbnRUaW1lclR5cGUiLCJsaWZlQ3ljbGVUaW1lckhhc1dhcm5lZCIsImNsZWFySGlzdG9yeSIsInB1cmdlVW5tb3VudGVkQ29tcG9uZW50cyIsImdldFRyZWVTbmFwc2hvdCIsInJlZ2lzdGVyZWRJRHMiLCJyZWR1Y2UiLCJ0cmVlIiwiaWQiLCJvd25lcklEIiwiZ2V0T3duZXJJRCIsInBhcmVudElEIiwiZ2V0UGFyZW50SUQiLCJkaXNwbGF5TmFtZSIsImdldERpc3BsYXlOYW1lIiwidGV4dCIsImdldFRleHQiLCJ1cGRhdGVDb3VudCIsImdldFVwZGF0ZUNvdW50IiwiY2hpbGRJRHMiLCJnZXRDaGlsZElEcyIsInJlc2V0TWVhc3VyZW1lbnRzIiwicHJldmlvdXNTdGFydFRpbWUiLCJwcmV2aW91c01lYXN1cmVtZW50cyIsInByZXZpb3VzT3BlcmF0aW9ucyIsImdldEhpc3RvcnkiLCJnZXRSZWdpc3RlcmVkSURzIiwicHVzaCIsImR1cmF0aW9uIiwibWVhc3VyZW1lbnRzIiwib3BlcmF0aW9ucyIsInRyZWVTbmFwc2hvdCIsImNoZWNrRGVidWdJRCIsImRlYnVnSUQiLCJhbGxvd1Jvb3QiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJiZWdpbkxpZmVDeWNsZVRpbWVyIiwidGltZXJUeXBlIiwiZW5kTGlmZUN5Y2xlVGltZXIiLCJpbnN0YW5jZUlEIiwicGF1c2VDdXJyZW50TGlmZUN5Y2xlVGltZXIiLCJjdXJyZW50VGltZXIiLCJzdGFydFRpbWUiLCJuZXN0ZWRGbHVzaFN0YXJ0VGltZSIsInJlc3VtZUN1cnJlbnRMaWZlQ3ljbGVUaW1lciIsIl9saWZlQ3ljbGVUaW1lclN0YWNrJCIsInBvcCIsIm5lc3RlZEZsdXNoRHVyYXRpb24iLCJsYXN0TWFya1RpbWVTdGFtcCIsImNhblVzZVBlcmZvcm1hbmNlTWVhc3VyZSIsInBlcmZvcm1hbmNlIiwibWFyayIsImNsZWFyTWFya3MiLCJtZWFzdXJlIiwiY2xlYXJNZWFzdXJlcyIsInNob3VsZE1hcmsiLCJlbGVtZW50IiwiZ2V0RWxlbWVudCIsImlzSG9zdEVsZW1lbnQiLCJ0eXBlIiwibWFya0JlZ2luIiwibWFya1R5cGUiLCJtYXJrTmFtZSIsIm1hcmtFbmQiLCJ0aW1lU3RhbXAiLCJtZWFzdXJlbWVudE5hbWUiLCJSZWFjdERlYnVnVG9vbCIsImFkZEhvb2siLCJyZW1vdmVIb29rIiwic3BsaWNlIiwiYmVnaW5Qcm9maWxpbmciLCJlbmRQcm9maWxpbmciLCJnZXRGbHVzaEhpc3RvcnkiLCJvbkJlZ2luRmx1c2giLCJvbkVuZEZsdXNoIiwib25CZWdpbkxpZmVDeWNsZVRpbWVyIiwib25FbmRMaWZlQ3ljbGVUaW1lciIsIm9uQmVnaW5Qcm9jZXNzaW5nQ2hpbGRDb250ZXh0Iiwib25FbmRQcm9jZXNzaW5nQ2hpbGRDb250ZXh0Iiwib25Ib3N0T3BlcmF0aW9uIiwib3BlcmF0aW9uIiwib25TZXRTdGF0ZSIsIm9uU2V0Q2hpbGRyZW4iLCJjaGlsZERlYnVnSURzIiwiZm9yRWFjaCIsIm9uQmVmb3JlTW91bnRDb21wb25lbnQiLCJwYXJlbnREZWJ1Z0lEIiwib25Nb3VudENvbXBvbmVudCIsIm9uQmVmb3JlVXBkYXRlQ29tcG9uZW50Iiwib25VcGRhdGVDb21wb25lbnQiLCJvbkJlZm9yZVVubW91bnRDb21wb25lbnQiLCJvblVubW91bnRDb21wb25lbnQiLCJvblRlc3RFdmVudCIsImFkZERldnRvb2wiLCJyZW1vdmVEZXZ0b29sIiwidXJsIiwiY2FuVXNlRE9NIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwidGVzdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7OztBQVdBOzs7O0FBRUEsSUFBSUEsa0NBQWtDQyxRQUFRLG1DQUFSLENBQXRDO0FBQ0EsSUFBSUMsZ0NBQWdDRCxRQUFRLGlDQUFSLENBQXBDO0FBQ0EsSUFBSUUseUJBQXlCRixRQUFRLGtDQUFSLENBQTdCO0FBQ0EsSUFBSUcsdUJBQXVCSCxRQUFRLCtCQUFSLENBQTNCOztBQUVBLElBQUlJLGlCQUFpQkosUUFBUSx5QkFBUixDQUFyQjtBQUNBLElBQUlLLFVBQVVMLFFBQVEsa0JBQVIsQ0FBZDs7QUFFQSxJQUFJTSxRQUFRLEVBQVo7QUFDQSxJQUFJQyx1QkFBdUIsRUFBM0I7O0FBRUEsU0FBU0MsUUFBVCxDQUFrQkMsS0FBbEIsRUFBeUJDLEVBQXpCLEVBQTZCQyxPQUE3QixFQUFzQ0MsSUFBdEMsRUFBNENDLElBQTVDLEVBQWtEQyxJQUFsRCxFQUF3REMsSUFBeEQsRUFBOERDLElBQTlELEVBQW9FO0FBQ2xFLE1BQUk7QUFDRk4sT0FBR08sSUFBSCxDQUFRTixPQUFSLEVBQWlCQyxJQUFqQixFQUF1QkMsSUFB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QUFrQztBQUNoQzdCLGlCQUFlSSxjQUFmO0FBQ0Q7O0FBRUQrQixPQUFPQyxPQUFQLEdBQWlCcEMsY0FBakIiLCJmaWxlIjoiUmVhY3REZWJ1Z1Rvb2wuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAyMDE2LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEludmFsaWRTZXRTdGF0ZVdhcm5pbmdIb29rID0gcmVxdWlyZSgnLi9SZWFjdEludmFsaWRTZXRTdGF0ZVdhcm5pbmdIb29rJyk7XG52YXIgUmVhY3RIb3N0T3BlcmF0aW9uSGlzdG9yeUhvb2sgPSByZXF1aXJlKCcuL1JlYWN0SG9zdE9wZXJhdGlvbkhpc3RvcnlIb29rJyk7XG52YXIgUmVhY3RDb21wb25lbnRUcmVlSG9vayA9IHJlcXVpcmUoJ3JlYWN0L2xpYi9SZWFjdENvbXBvbmVudFRyZWVIb29rJyk7XG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgcGVyZm9ybWFuY2VOb3cgPSByZXF1aXJlKCdmYmpzL2xpYi9wZXJmb3JtYW5jZU5vdycpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciBob29rcyA9IFtdO1xudmFyIGRpZEhvb2tUaHJvd0ZvckV2ZW50ID0ge307XG5cbmZ1bmN0aW9uIGNhbGxIb29rKGV2ZW50LCBmbiwgY29udGV4dCwgYXJnMSwgYXJnMiwgYXJnMywgYXJnNCwgYXJnNSkge1xuICB0cnkge1xuICAgIGZuLmNhbGwoY29udGV4dCwgYXJnMSwgYXJnMiwgYXJnMywgYXJnNCwgYXJnNSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhkaWRIb29rVGhyb3dGb3JFdmVudFtldmVudF0sICdFeGNlcHRpb24gdGhyb3duIGJ5IGhvb2sgd2hpbGUgaGFuZGxpbmcgJXM6ICVzJywgZXZlbnQsIGUgKyAnXFxuJyArIGUuc3RhY2spIDogdm9pZCAwO1xuICAgIGRpZEhvb2tUaHJvd0ZvckV2ZW50W2V2ZW50XSA9IHRydWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gZW1pdEV2ZW50KGV2ZW50LCBhcmcxLCBhcmcyLCBhcmczLCBhcmc0LCBhcmc1KSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgaG9va3MubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaG9vayA9IGhvb2tzW2ldO1xuICAgIHZhciBmbiA9IGhvb2tbZXZlbnRdO1xuICAgIGlmIChmbikge1xuICAgICAgY2FsbEhvb2soZXZlbnQsIGZuLCBob29rLCBhcmcxLCBhcmcyLCBhcmczLCBhcmc0LCBhcmc1KTtcbiAgICB9XG4gIH1cbn1cblxudmFyIGlzUHJvZmlsaW5nID0gZmFsc2U7XG52YXIgZmx1c2hIaXN0b3J5ID0gW107XG52YXIgbGlmZUN5Y2xlVGltZXJTdGFjayA9IFtdO1xudmFyIGN1cnJlbnRGbHVzaE5lc3RpbmcgPSAwO1xudmFyIGN1cnJlbnRGbHVzaE1lYXN1cmVtZW50cyA9IFtdO1xudmFyIGN1cnJlbnRGbHVzaFN0YXJ0VGltZSA9IDA7XG52YXIgY3VycmVudFRpbWVyRGVidWdJRCA9IG51bGw7XG52YXIgY3VycmVudFRpbWVyU3RhcnRUaW1lID0gMDtcbnZhciBjdXJyZW50VGltZXJOZXN0ZWRGbHVzaER1cmF0aW9uID0gMDtcbnZhciBjdXJyZW50VGltZXJUeXBlID0gbnVsbDtcblxudmFyIGxpZmVDeWNsZVRpbWVySGFzV2FybmVkID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGNsZWFySGlzdG9yeSgpIHtcbiAgUmVhY3RDb21wb25lbnRUcmVlSG9vay5wdXJnZVVubW91bnRlZENvbXBvbmVudHMoKTtcbiAgUmVhY3RIb3N0T3BlcmF0aW9uSGlzdG9yeUhvb2suY2xlYXJIaXN0b3J5KCk7XG59XG5cbmZ1bmN0aW9uIGdldFRyZWVTbmFwc2hvdChyZWdpc3RlcmVkSURzKSB7XG4gIHJldHVybiByZWdpc3RlcmVkSURzLnJlZHVjZShmdW5jdGlvbiAodHJlZSwgaWQpIHtcbiAgICB2YXIgb3duZXJJRCA9IFJlYWN0Q29tcG9uZW50VHJlZUhvb2suZ2V0T3duZXJJRChpZCk7XG4gICAgdmFyIHBhcmVudElEID0gUmVhY3RDb21wb25lbnRUcmVlSG9vay5nZXRQYXJlbnRJRChpZCk7XG4gICAgdHJlZVtpZF0gPSB7XG4gICAgICBkaXNwbGF5TmFtZTogUmVhY3RDb21wb25lbnRUcmVlSG9vay5nZXREaXNwbGF5TmFtZShpZCksXG4gICAgICB0ZXh0OiBSZWFjdENvbXBvbmVudFRyZWVIb29rLmdldFRleHQoaWQpLFxuICAgICAgdXBkYXRlQ291bnQ6IFJlYWN0Q29tcG9uZW50VHJlZUhvb2suZ2V0VXBkYXRlQ291bnQoaWQpLFxuICAgICAgY2hpbGRJRHM6IFJlYWN0Q29tcG9uZW50VHJlZUhvb2suZ2V0Q2hpbGRJRHMoaWQpLFxuICAgICAgLy8gVGV4dCBub2RlcyBkb24ndCBoYXZlIG93bmVycyBidXQgdGhpcyBpcyBjbG9zZSBlbm91Z2guXG4gICAgICBvd25lcklEOiBvd25lcklEIHx8IHBhcmVudElEICYmIFJlYWN0Q29tcG9uZW50VHJlZUhvb2suZ2V0T3duZXJJRChwYXJlbnRJRCkgfHwgMCxcbiAgICAgIHBhcmVudElEOiBwYXJlbnRJRFxuICAgIH07XG4gICAgcmV0dXJuIHRyZWU7XG4gIH0sIHt9KTtcbn1cblxuZnVuY3Rpb24gcmVzZXRNZWFzdXJlbWVudHMoKSB7XG4gIHZhciBwcmV2aW91c1N0YXJ0VGltZSA9IGN1cnJlbnRGbHVzaFN0YXJ0VGltZTtcbiAgdmFyIHByZXZpb3VzTWVhc3VyZW1lbnRzID0gY3VycmVudEZsdXNoTWVhc3VyZW1lbnRzO1xuICB2YXIgcHJldmlvdXNPcGVyYXRpb25zID0gUmVhY3RIb3N0T3BlcmF0aW9uSGlzdG9yeUhvb2suZ2V0SGlzdG9yeSgpO1xuXG4gIGlmIChjdXJyZW50Rmx1c2hOZXN0aW5nID09PSAwKSB7XG4gICAgY3VycmVudEZsdXNoU3RhcnRUaW1lID0gMDtcbiAgICBjdXJyZW50Rmx1c2hNZWFzdXJlbWVudHMgPSBbXTtcbiAgICBjbGVhckhpc3RvcnkoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAocHJldmlvdXNNZWFzdXJlbWVudHMubGVuZ3RoIHx8IHByZXZpb3VzT3BlcmF0aW9ucy5sZW5ndGgpIHtcbiAgICB2YXIgcmVnaXN0ZXJlZElEcyA9IFJlYWN0Q29tcG9uZW50VHJlZUhvb2suZ2V0UmVnaXN0ZXJlZElEcygpO1xuICAgIGZsdXNoSGlzdG9yeS5wdXNoKHtcbiAgICAgIGR1cmF0aW9uOiBwZXJmb3JtYW5jZU5vdygpIC0gcHJldmlvdXNTdGFydFRpbWUsXG4gICAgICBtZWFzdXJlbWVudHM6IHByZXZpb3VzTWVhc3VyZW1lbnRzIHx8IFtdLFxuICAgICAgb3BlcmF0aW9uczogcHJldmlvdXNPcGVyYXRpb25zIHx8IFtdLFxuICAgICAgdHJlZVNuYXBzaG90OiBnZXRUcmVlU25hcHNob3QocmVnaXN0ZXJlZElEcylcbiAgICB9KTtcbiAgfVxuXG4gIGNsZWFySGlzdG9yeSgpO1xuICBjdXJyZW50Rmx1c2hTdGFydFRpbWUgPSBwZXJmb3JtYW5jZU5vdygpO1xuICBjdXJyZW50Rmx1c2hNZWFzdXJlbWVudHMgPSBbXTtcbn1cblxuZnVuY3Rpb24gY2hlY2tEZWJ1Z0lEKGRlYnVnSUQpIHtcbiAgdmFyIGFsbG93Um9vdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG5cbiAgaWYgKGFsbG93Um9vdCAmJiBkZWJ1Z0lEID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghZGVidWdJRCkge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3REZWJ1Z1Rvb2w6IGRlYnVnSUQgbWF5IG5vdCBiZSBlbXB0eS4nKSA6IHZvaWQgMDtcbiAgfVxufVxuXG5mdW5jdGlvbiBiZWdpbkxpZmVDeWNsZVRpbWVyKGRlYnVnSUQsIHRpbWVyVHlwZSkge1xuICBpZiAoY3VycmVudEZsdXNoTmVzdGluZyA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoY3VycmVudFRpbWVyVHlwZSAmJiAhbGlmZUN5Y2xlVGltZXJIYXNXYXJuZWQpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1RoZXJlIGlzIGFuIGludGVybmFsIGVycm9yIGluIHRoZSBSZWFjdCBwZXJmb3JtYW5jZSBtZWFzdXJlbWVudCBjb2RlLiAnICsgJ0RpZCBub3QgZXhwZWN0ICVzIHRpbWVyIHRvIHN0YXJ0IHdoaWxlICVzIHRpbWVyIGlzIHN0aWxsIGluICcgKyAncHJvZ3Jlc3MgZm9yICVzIGluc3RhbmNlLicsIHRpbWVyVHlwZSwgY3VycmVudFRpbWVyVHlwZSB8fCAnbm8nLCBkZWJ1Z0lEID09PSBjdXJyZW50VGltZXJEZWJ1Z0lEID8gJ3RoZSBzYW1lJyA6ICdhbm90aGVyJykgOiB2b2lkIDA7XG4gICAgbGlmZUN5Y2xlVGltZXJIYXNXYXJuZWQgPSB0cnVlO1xuICB9XG4gIGN1cnJlbnRUaW1lclN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlTm93KCk7XG4gIGN1cnJlbnRUaW1lck5lc3RlZEZsdXNoRHVyYXRpb24gPSAwO1xuICBjdXJyZW50VGltZXJEZWJ1Z0lEID0gZGVidWdJRDtcbiAgY3VycmVudFRpbWVyVHlwZSA9IHRpbWVyVHlwZTtcbn1cblxuZnVuY3Rpb24gZW5kTGlmZUN5Y2xlVGltZXIoZGVidWdJRCwgdGltZXJUeXBlKSB7XG4gIGlmIChjdXJyZW50Rmx1c2hOZXN0aW5nID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChjdXJyZW50VGltZXJUeXBlICE9PSB0aW1lclR5cGUgJiYgIWxpZmVDeWNsZVRpbWVySGFzV2FybmVkKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdUaGVyZSBpcyBhbiBpbnRlcm5hbCBlcnJvciBpbiB0aGUgUmVhY3QgcGVyZm9ybWFuY2UgbWVhc3VyZW1lbnQgY29kZS4gJyArICdXZSBkaWQgbm90IGV4cGVjdCAlcyB0aW1lciB0byBzdG9wIHdoaWxlICVzIHRpbWVyIGlzIHN0aWxsIGluICcgKyAncHJvZ3Jlc3MgZm9yICVzIGluc3RhbmNlLiBQbGVhc2UgcmVwb3J0IHRoaXMgYXMgYSBidWcgaW4gUmVhY3QuJywgdGltZXJUeXBlLCBjdXJyZW50VGltZXJUeXBlIHx8ICdubycsIGRlYnVnSUQgPT09IGN1cnJlbnRUaW1lckRlYnVnSUQgPyAndGhlIHNhbWUnIDogJ2Fub3RoZXInKSA6IHZvaWQgMDtcbiAgICBsaWZlQ3ljbGVUaW1lckhhc1dhcm5lZCA9IHRydWU7XG4gIH1cbiAgaWYgKGlzUHJvZmlsaW5nKSB7XG4gICAgY3VycmVudEZsdXNoTWVhc3VyZW1lbnRzLnB1c2goe1xuICAgICAgdGltZXJUeXBlOiB0aW1lclR5cGUsXG4gICAgICBpbnN0YW5jZUlEOiBkZWJ1Z0lELFxuICAgICAgZHVyYXRpb246IHBlcmZvcm1hbmNlTm93KCkgLSBjdXJyZW50VGltZXJTdGFydFRpbWUgLSBjdXJyZW50VGltZXJOZXN0ZWRGbHVzaER1cmF0aW9uXG4gICAgfSk7XG4gIH1cbiAgY3VycmVudFRpbWVyU3RhcnRUaW1lID0gMDtcbiAgY3VycmVudFRpbWVyTmVzdGVkRmx1c2hEdXJhdGlvbiA9IDA7XG4gIGN1cnJlbnRUaW1lckRlYnVnSUQgPSBudWxsO1xuICBjdXJyZW50VGltZXJUeXBlID0gbnVsbDtcbn1cblxuZnVuY3Rpb24gcGF1c2VDdXJyZW50TGlmZUN5Y2xlVGltZXIoKSB7XG4gIHZhciBjdXJyZW50VGltZXIgPSB7XG4gICAgc3RhcnRUaW1lOiBjdXJyZW50VGltZXJTdGFydFRpbWUsXG4gICAgbmVzdGVkRmx1c2hTdGFydFRpbWU6IHBlcmZvcm1hbmNlTm93KCksXG4gICAgZGVidWdJRDogY3VycmVudFRpbWVyRGVidWdJRCxcbiAgICB0aW1lclR5cGU6IGN1cnJlbnRUaW1lclR5cGVcbiAgfTtcbiAgbGlmZUN5Y2xlVGltZXJTdGFjay5wdXNoKGN1cnJlbnRUaW1lcik7XG4gIGN1cnJlbnRUaW1lclN0YXJ0VGltZSA9IDA7XG4gIGN1cnJlbnRUaW1lck5lc3RlZEZsdXNoRHVyYXRpb24gPSAwO1xuICBjdXJyZW50VGltZXJEZWJ1Z0lEID0gbnVsbDtcbiAgY3VycmVudFRpbWVyVHlwZSA9IG51bGw7XG59XG5cbmZ1bmN0aW9uIHJlc3VtZUN1cnJlbnRMaWZlQ3ljbGVUaW1lcigpIHtcbiAgdmFyIF9saWZlQ3ljbGVUaW1lclN0YWNrJCA9IGxpZmVDeWNsZVRpbWVyU3RhY2sucG9wKCksXG4gICAgICBzdGFydFRpbWUgPSBfbGlmZUN5Y2xlVGltZXJTdGFjayQuc3RhcnRUaW1lLFxuICAgICAgbmVzdGVkRmx1c2hTdGFydFRpbWUgPSBfbGlmZUN5Y2xlVGltZXJTdGFjayQubmVzdGVkRmx1c2hTdGFydFRpbWUsXG4gICAgICBkZWJ1Z0lEID0gX2xpZmVDeWNsZVRpbWVyU3RhY2skLmRlYnVnSUQsXG4gICAgICB0aW1lclR5cGUgPSBfbGlmZUN5Y2xlVGltZXJTdGFjayQudGltZXJUeXBlO1xuXG4gIHZhciBuZXN0ZWRGbHVzaER1cmF0aW9uID0gcGVyZm9ybWFuY2VOb3coKSAtIG5lc3RlZEZsdXNoU3RhcnRUaW1lO1xuICBjdXJyZW50VGltZXJTdGFydFRpbWUgPSBzdGFydFRpbWU7XG4gIGN1cnJlbnRUaW1lck5lc3RlZEZsdXNoRHVyYXRpb24gKz0gbmVzdGVkRmx1c2hEdXJhdGlvbjtcbiAgY3VycmVudFRpbWVyRGVidWdJRCA9IGRlYnVnSUQ7XG4gIGN1cnJlbnRUaW1lclR5cGUgPSB0aW1lclR5cGU7XG59XG5cbnZhciBsYXN0TWFya1RpbWVTdGFtcCA9IDA7XG52YXIgY2FuVXNlUGVyZm9ybWFuY2VNZWFzdXJlID1cbi8vICRGbG93Rml4TWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2Zsb3cvaXNzdWVzLzIzNDVcbnR5cGVvZiBwZXJmb3JtYW5jZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHBlcmZvcm1hbmNlLm1hcmsgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHBlcmZvcm1hbmNlLmNsZWFyTWFya3MgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHBlcmZvcm1hbmNlLm1lYXN1cmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHBlcmZvcm1hbmNlLmNsZWFyTWVhc3VyZXMgPT09ICdmdW5jdGlvbic7XG5cbmZ1bmN0aW9uIHNob3VsZE1hcmsoZGVidWdJRCkge1xuICBpZiAoIWlzUHJvZmlsaW5nIHx8ICFjYW5Vc2VQZXJmb3JtYW5jZU1lYXN1cmUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIGVsZW1lbnQgPSBSZWFjdENvbXBvbmVudFRyZWVIb29rLmdldEVsZW1lbnQoZGVidWdJRCk7XG4gIGlmIChlbGVtZW50ID09IG51bGwgfHwgdHlwZW9mIGVsZW1lbnQgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBpc0hvc3RFbGVtZW50ID0gdHlwZW9mIGVsZW1lbnQudHlwZSA9PT0gJ3N0cmluZyc7XG4gIGlmIChpc0hvc3RFbGVtZW50KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBtYXJrQmVnaW4oZGVidWdJRCwgbWFya1R5cGUpIHtcbiAgaWYgKCFzaG91bGRNYXJrKGRlYnVnSUQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIG1hcmtOYW1lID0gZGVidWdJRCArICc6OicgKyBtYXJrVHlwZTtcbiAgbGFzdE1hcmtUaW1lU3RhbXAgPSBwZXJmb3JtYW5jZU5vdygpO1xuICBwZXJmb3JtYW5jZS5tYXJrKG1hcmtOYW1lKTtcbn1cblxuZnVuY3Rpb24gbWFya0VuZChkZWJ1Z0lELCBtYXJrVHlwZSkge1xuICBpZiAoIXNob3VsZE1hcmsoZGVidWdJRCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgbWFya05hbWUgPSBkZWJ1Z0lEICsgJzo6JyArIG1hcmtUeXBlO1xuICB2YXIgZGlzcGxheU5hbWUgPSBSZWFjdENvbXBvbmVudFRyZWVIb29rLmdldERpc3BsYXlOYW1lKGRlYnVnSUQpIHx8ICdVbmtub3duJztcblxuICAvLyBDaHJvbWUgaGFzIGFuIGlzc3VlIG9mIGRyb3BwaW5nIG1hcmtlcnMgcmVjb3JkZWQgdG9vIGZhc3Q6XG4gIC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTY0MDY1MlxuICAvLyBUbyB3b3JrIGFyb3VuZCB0aGlzLCB3ZSB3aWxsIG5vdCByZXBvcnQgdmVyeSBzbWFsbCBtZWFzdXJlbWVudHMuXG4gIC8vIEkgZGV0ZXJtaW5lZCB0aGUgbWFnaWMgbnVtYmVyIGJ5IHR3ZWFraW5nIGl0IGJhY2sgYW5kIGZvcnRoLlxuICAvLyAwLjA1bXMgd2FzIGVub3VnaCB0byBwcmV2ZW50IHRoZSBpc3N1ZSwgYnV0IEkgc2V0IGl0IHRvIDAuMW1zIHRvIGJlIHNhZmUuXG4gIC8vIFdoZW4gdGhlIGJ1ZyBpcyBmaXhlZCwgd2UgY2FuIGBtZWFzdXJlKClgIHVuY29uZGl0aW9uYWxseSBpZiB3ZSB3YW50IHRvLlxuICB2YXIgdGltZVN0YW1wID0gcGVyZm9ybWFuY2VOb3coKTtcbiAgaWYgKHRpbWVTdGFtcCAtIGxhc3RNYXJrVGltZVN0YW1wID4gMC4xKSB7XG4gICAgdmFyIG1lYXN1cmVtZW50TmFtZSA9IGRpc3BsYXlOYW1lICsgJyBbJyArIG1hcmtUeXBlICsgJ10nO1xuICAgIHBlcmZvcm1hbmNlLm1lYXN1cmUobWVhc3VyZW1lbnROYW1lLCBtYXJrTmFtZSk7XG4gIH1cblxuICBwZXJmb3JtYW5jZS5jbGVhck1hcmtzKG1hcmtOYW1lKTtcbiAgcGVyZm9ybWFuY2UuY2xlYXJNZWFzdXJlcyhtZWFzdXJlbWVudE5hbWUpO1xufVxuXG52YXIgUmVhY3REZWJ1Z1Rvb2wgPSB7XG4gIGFkZEhvb2s6IGZ1bmN0aW9uIChob29rKSB7XG4gICAgaG9va3MucHVzaChob29rKTtcbiAgfSxcbiAgcmVtb3ZlSG9vazogZnVuY3Rpb24gKGhvb2spIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhvb2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoaG9va3NbaV0gPT09IGhvb2spIHtcbiAgICAgICAgaG9va3Muc3BsaWNlKGksIDEpO1xuICAgICAgICBpLS07XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBpc1Byb2ZpbGluZzogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBpc1Byb2ZpbGluZztcbiAgfSxcbiAgYmVnaW5Qcm9maWxpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaXNQcm9maWxpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpc1Byb2ZpbGluZyA9IHRydWU7XG4gICAgZmx1c2hIaXN0b3J5Lmxlbmd0aCA9IDA7XG4gICAgcmVzZXRNZWFzdXJlbWVudHMoKTtcbiAgICBSZWFjdERlYnVnVG9vbC5hZGRIb29rKFJlYWN0SG9zdE9wZXJhdGlvbkhpc3RvcnlIb29rKTtcbiAgfSxcbiAgZW5kUHJvZmlsaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFpc1Byb2ZpbGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlzUHJvZmlsaW5nID0gZmFsc2U7XG4gICAgcmVzZXRNZWFzdXJlbWVudHMoKTtcbiAgICBSZWFjdERlYnVnVG9vbC5yZW1vdmVIb29rKFJlYWN0SG9zdE9wZXJhdGlvbkhpc3RvcnlIb29rKTtcbiAgfSxcbiAgZ2V0Rmx1c2hIaXN0b3J5OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZsdXNoSGlzdG9yeTtcbiAgfSxcbiAgb25CZWdpbkZsdXNoOiBmdW5jdGlvbiAoKSB7XG4gICAgY3VycmVudEZsdXNoTmVzdGluZysrO1xuICAgIHJlc2V0TWVhc3VyZW1lbnRzKCk7XG4gICAgcGF1c2VDdXJyZW50TGlmZUN5Y2xlVGltZXIoKTtcbiAgICBlbWl0RXZlbnQoJ29uQmVnaW5GbHVzaCcpO1xuICB9LFxuICBvbkVuZEZsdXNoOiBmdW5jdGlvbiAoKSB7XG4gICAgcmVzZXRNZWFzdXJlbWVudHMoKTtcbiAgICBjdXJyZW50Rmx1c2hOZXN0aW5nLS07XG4gICAgcmVzdW1lQ3VycmVudExpZmVDeWNsZVRpbWVyKCk7XG4gICAgZW1pdEV2ZW50KCdvbkVuZEZsdXNoJyk7XG4gIH0sXG4gIG9uQmVnaW5MaWZlQ3ljbGVUaW1lcjogZnVuY3Rpb24gKGRlYnVnSUQsIHRpbWVyVHlwZSkge1xuICAgIGNoZWNrRGVidWdJRChkZWJ1Z0lEKTtcbiAgICBlbWl0RXZlbnQoJ29uQmVnaW5MaWZlQ3ljbGVUaW1lcicsIGRlYnVnSUQsIHRpbWVyVHlwZSk7XG4gICAgbWFya0JlZ2luKGRlYnVnSUQsIHRpbWVyVHlwZSk7XG4gICAgYmVnaW5MaWZlQ3ljbGVUaW1lcihkZWJ1Z0lELCB0aW1lclR5cGUpO1xuICB9LFxuICBvbkVuZExpZmVDeWNsZVRpbWVyOiBmdW5jdGlvbiAoZGVidWdJRCwgdGltZXJUeXBlKSB7XG4gICAgY2hlY2tEZWJ1Z0lEKGRlYnVnSUQpO1xuICAgIGVuZExpZmVDeWNsZVRpbWVyKGRlYnVnSUQsIHRpbWVyVHlwZSk7XG4gICAgbWFya0VuZChkZWJ1Z0lELCB0aW1lclR5cGUpO1xuICAgIGVtaXRFdmVudCgnb25FbmRMaWZlQ3ljbGVUaW1lcicsIGRlYnVnSUQsIHRpbWVyVHlwZSk7XG4gIH0sXG4gIG9uQmVnaW5Qcm9jZXNzaW5nQ2hpbGRDb250ZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgZW1pdEV2ZW50KCdvbkJlZ2luUHJvY2Vzc2luZ0NoaWxkQ29udGV4dCcpO1xuICB9LFxuICBvbkVuZFByb2Nlc3NpbmdDaGlsZENvbnRleHQ6IGZ1bmN0aW9uICgpIHtcbiAgICBlbWl0RXZlbnQoJ29uRW5kUHJvY2Vzc2luZ0NoaWxkQ29udGV4dCcpO1xuICB9LFxuICBvbkhvc3RPcGVyYXRpb246IGZ1bmN0aW9uIChvcGVyYXRpb24pIHtcbiAgICBjaGVja0RlYnVnSUQob3BlcmF0aW9uLmluc3RhbmNlSUQpO1xuICAgIGVtaXRFdmVudCgnb25Ib3N0T3BlcmF0aW9uJywgb3BlcmF0aW9uKTtcbiAgfSxcbiAgb25TZXRTdGF0ZTogZnVuY3Rpb24gKCkge1xuICAgIGVtaXRFdmVudCgnb25TZXRTdGF0ZScpO1xuICB9LFxuICBvblNldENoaWxkcmVuOiBmdW5jdGlvbiAoZGVidWdJRCwgY2hpbGREZWJ1Z0lEcykge1xuICAgIGNoZWNrRGVidWdJRChkZWJ1Z0lEKTtcbiAgICBjaGlsZERlYnVnSURzLmZvckVhY2goY2hlY2tEZWJ1Z0lEKTtcbiAgICBlbWl0RXZlbnQoJ29uU2V0Q2hpbGRyZW4nLCBkZWJ1Z0lELCBjaGlsZERlYnVnSURzKTtcbiAgfSxcbiAgb25CZWZvcmVNb3VudENvbXBvbmVudDogZnVuY3Rpb24gKGRlYnVnSUQsIGVsZW1lbnQsIHBhcmVudERlYnVnSUQpIHtcbiAgICBjaGVja0RlYnVnSUQoZGVidWdJRCk7XG4gICAgY2hlY2tEZWJ1Z0lEKHBhcmVudERlYnVnSUQsIHRydWUpO1xuICAgIGVtaXRFdmVudCgnb25CZWZvcmVNb3VudENvbXBvbmVudCcsIGRlYnVnSUQsIGVsZW1lbnQsIHBhcmVudERlYnVnSUQpO1xuICAgIG1hcmtCZWdpbihkZWJ1Z0lELCAnbW91bnQnKTtcbiAgfSxcbiAgb25Nb3VudENvbXBvbmVudDogZnVuY3Rpb24gKGRlYnVnSUQpIHtcbiAgICBjaGVja0RlYnVnSUQoZGVidWdJRCk7XG4gICAgbWFya0VuZChkZWJ1Z0lELCAnbW91bnQnKTtcbiAgICBlbWl0RXZlbnQoJ29uTW91bnRDb21wb25lbnQnLCBkZWJ1Z0lEKTtcbiAgfSxcbiAgb25CZWZvcmVVcGRhdGVDb21wb25lbnQ6IGZ1bmN0aW9uIChkZWJ1Z0lELCBlbGVtZW50KSB7XG4gICAgY2hlY2tEZWJ1Z0lEKGRlYnVnSUQpO1xuICAgIGVtaXRFdmVudCgnb25CZWZvcmVVcGRhdGVDb21wb25lbnQnLCBkZWJ1Z0lELCBlbGVtZW50KTtcbiAgICBtYXJrQmVnaW4oZGVidWdJRCwgJ3VwZGF0ZScpO1xuICB9LFxuICBvblVwZGF0ZUNvbXBvbmVudDogZnVuY3Rpb24gKGRlYnVnSUQpIHtcbiAgICBjaGVja0RlYnVnSUQoZGVidWdJRCk7XG4gICAgbWFya0VuZChkZWJ1Z0lELCAndXBkYXRlJyk7XG4gICAgZW1pdEV2ZW50KCdvblVwZGF0ZUNvbXBvbmVudCcsIGRlYnVnSUQpO1xuICB9LFxuICBvbkJlZm9yZVVubW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChkZWJ1Z0lEKSB7XG4gICAgY2hlY2tEZWJ1Z0lEKGRlYnVnSUQpO1xuICAgIGVtaXRFdmVudCgnb25CZWZvcmVVbm1vdW50Q29tcG9uZW50JywgZGVidWdJRCk7XG4gICAgbWFya0JlZ2luKGRlYnVnSUQsICd1bm1vdW50Jyk7XG4gIH0sXG4gIG9uVW5tb3VudENvbXBvbmVudDogZnVuY3Rpb24gKGRlYnVnSUQpIHtcbiAgICBjaGVja0RlYnVnSUQoZGVidWdJRCk7XG4gICAgbWFya0VuZChkZWJ1Z0lELCAndW5tb3VudCcpO1xuICAgIGVtaXRFdmVudCgnb25Vbm1vdW50Q29tcG9uZW50JywgZGVidWdJRCk7XG4gIH0sXG4gIG9uVGVzdEV2ZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgZW1pdEV2ZW50KCdvblRlc3RFdmVudCcpO1xuICB9XG59O1xuXG4vLyBUT0RPIHJlbW92ZSB0aGVzZSB3aGVuIFJOL3d3dyBnZXRzIHVwZGF0ZWRcblJlYWN0RGVidWdUb29sLmFkZERldnRvb2wgPSBSZWFjdERlYnVnVG9vbC5hZGRIb29rO1xuUmVhY3REZWJ1Z1Rvb2wucmVtb3ZlRGV2dG9vbCA9IFJlYWN0RGVidWdUb29sLnJlbW92ZUhvb2s7XG5cblJlYWN0RGVidWdUb29sLmFkZEhvb2soUmVhY3RJbnZhbGlkU2V0U3RhdGVXYXJuaW5nSG9vayk7XG5SZWFjdERlYnVnVG9vbC5hZGRIb29rKFJlYWN0Q29tcG9uZW50VHJlZUhvb2spO1xudmFyIHVybCA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiB3aW5kb3cubG9jYXRpb24uaHJlZiB8fCAnJztcbmlmICgvWz8mXXJlYWN0X3BlcmZcXGIvLnRlc3QodXJsKSkge1xuICBSZWFjdERlYnVnVG9vbC5iZWdpblByb2ZpbGluZygpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RGVidWdUb29sOyJdfQ==