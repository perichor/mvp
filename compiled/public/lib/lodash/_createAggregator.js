'use strict';

var arrayAggregator = require('./_arrayAggregator'),
    baseAggregator = require('./_baseAggregator'),
    baseIteratee = require('./_baseIteratee'),
    isArray = require('./isArray');

/**
 * Creates a function like `_.groupBy`.
 *
 * @private
 * @param {Function} setter The function to set accumulator values.
 * @param {Function} [initializer] The accumulator object initializer.
 * @returns {Function} Returns the new aggregator function.
 */
function createAggregator(setter, initializer) {
    return function (collection, iteratee) {
        var func = isArray(collection) ? arrayAggregator : baseAggregator,
            accumulator = initializer ? initializer() : {};

        return func(collection, setter, baseIteratee(iteratee, 2), accumulator);
    };
}

module.exports = createAggregator;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3B1YmxpYy9saWIvbG9kYXNoL19jcmVhdGVBZ2dyZWdhdG9yLmpzIl0sIm5hbWVzIjpbImFycmF5QWdncmVnYXRvciIsInJlcXVpcmUiLCJiYXNlQWdncmVnYXRvciIsImJhc2VJdGVyYXRlZSIsImlzQXJyYXkiLCJjcmVhdGVBZ2dyZWdhdG9yIiwic2V0dGVyIiwiaW5pdGlhbGl6ZXIiLCJjb2xsZWN0aW9uIiwiaXRlcmF0ZWUiLCJmdW5jIiwiYWNjdW11bGF0b3IiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUlBLGtCQUFrQkMsUUFBUSxvQkFBUixDQUF0QjtBQUFBLElBQ0lDLGlCQUFpQkQsUUFBUSxtQkFBUixDQURyQjtBQUFBLElBRUlFLGVBQWVGLFFBQVEsaUJBQVIsQ0FGbkI7QUFBQSxJQUdJRyxVQUFVSCxRQUFRLFdBQVIsQ0FIZDs7QUFLQTs7Ozs7Ozs7QUFRQSxTQUFTSSxnQkFBVCxDQUEwQkMsTUFBMUIsRUFBa0NDLFdBQWxDLEVBQStDO0FBQzdDLFdBQU8sVUFBU0MsVUFBVCxFQUFxQkMsUUFBckIsRUFBK0I7QUFDcEMsWUFBSUMsT0FBT04sUUFBUUksVUFBUixJQUFzQlIsZUFBdEIsR0FBd0NFLGNBQW5EO0FBQUEsWUFDSVMsY0FBY0osY0FBY0EsYUFBZCxHQUE4QixFQURoRDs7QUFHQSxlQUFPRyxLQUFLRixVQUFMLEVBQWlCRixNQUFqQixFQUF5QkgsYUFBYU0sUUFBYixFQUF1QixDQUF2QixDQUF6QixFQUFvREUsV0FBcEQsQ0FBUDtBQUNELEtBTEQ7QUFNRDs7QUFFREMsT0FBT0MsT0FBUCxHQUFpQlIsZ0JBQWpCIiwiZmlsZSI6Il9jcmVhdGVBZ2dyZWdhdG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFycmF5QWdncmVnYXRvciA9IHJlcXVpcmUoJy4vX2FycmF5QWdncmVnYXRvcicpLFxuICAgIGJhc2VBZ2dyZWdhdG9yID0gcmVxdWlyZSgnLi9fYmFzZUFnZ3JlZ2F0b3InKSxcbiAgICBiYXNlSXRlcmF0ZWUgPSByZXF1aXJlKCcuL19iYXNlSXRlcmF0ZWUnKSxcbiAgICBpc0FycmF5ID0gcmVxdWlyZSgnLi9pc0FycmF5Jyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIGxpa2UgYF8uZ3JvdXBCeWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHNldHRlciBUaGUgZnVuY3Rpb24gdG8gc2V0IGFjY3VtdWxhdG9yIHZhbHVlcy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtpbml0aWFsaXplcl0gVGhlIGFjY3VtdWxhdG9yIG9iamVjdCBpbml0aWFsaXplci5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFnZ3JlZ2F0b3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUFnZ3JlZ2F0b3Ioc2V0dGVyLCBpbml0aWFsaXplcikge1xuICByZXR1cm4gZnVuY3Rpb24oY29sbGVjdGlvbiwgaXRlcmF0ZWUpIHtcbiAgICB2YXIgZnVuYyA9IGlzQXJyYXkoY29sbGVjdGlvbikgPyBhcnJheUFnZ3JlZ2F0b3IgOiBiYXNlQWdncmVnYXRvcixcbiAgICAgICAgYWNjdW11bGF0b3IgPSBpbml0aWFsaXplciA/IGluaXRpYWxpemVyKCkgOiB7fTtcblxuICAgIHJldHVybiBmdW5jKGNvbGxlY3Rpb24sIHNldHRlciwgYmFzZUl0ZXJhdGVlKGl0ZXJhdGVlLCAyKSwgYWNjdW11bGF0b3IpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZUFnZ3JlZ2F0b3I7XG4iXX0=